(this["webpackJsonp01-firsr-project"]=this["webpackJsonp01-firsr-project"]||[]).push([[5],{560:function(e,n,t){"use strict";t.r(n);var a=t(98),r=t(207),l=t(0),u=t.n(l),c=function(){var e=u.a.useState(null),n=Object(r.a)(e,2),t=n[0],a=n[1];return u.a.useEffect((function(){var e,n=function(){console.log("CLOSE WS"),setTimeout(t,3e3)};function t(){var t,r,l;null===(t=e)||void 0===t||t.removeEventListener("close",n),null===(r=e)||void 0===r||r.close(),null===(l=e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))||void 0===l||l.addEventListener("close",n),a(e)}return t(),function(){e.removeEventListener("close",n),e.close()}}),[]),u.a.useEffect((function(){}),[t]),u.a.createElement("div",null,u.a.createElement(o,{wsChannel:t}),u.a.createElement(i,{wsChannel:t}))},o=function(e){var n=e.wsChannel,t=u.a.useState([]),l=Object(r.a)(t,2),c=l[0],o=l[1];return u.a.useEffect((function(){var e=function(e){var n=JSON.parse(e.data);o((function(e){return[].concat(Object(a.a)(e),Object(a.a)(n))}))};return null===n||void 0===n||n.addEventListener("message",e),function(){null===n||void 0===n||n.removeEventListener("message",e)}}),[n]),u.a.createElement("div",{style:{height:"400px",overflow:"auto"}},c.map((function(e,n){return u.a.createElement(s,{key:"".concat(n,"_").concat(e.userName),message:e})})))},s=function(e){var n=e.message;return u.a.createElement("div",null,u.a.createElement("img",{style:{width:"80px",borderRadius:"50%"},src:n.photo,alt:"image_photo"}),u.a.createElement("b",null,n.userName),u.a.createElement("br",null),u.a.createElement("p",null,n.message),u.a.createElement("hr",null))},i=function(e){var n=e.wsChannel,t=u.a.useState(""),a=Object(r.a)(t,2),l=a[0],c=a[1],o=u.a.useState("pending"),s=Object(r.a)(o,2),i=s[0],v=s[1];u.a.useEffect((function(){var e=function(){v("ready")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]);return u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("textarea",{onChange:function(e){return c(e.currentTarget.value)},value:l})),u.a.createElement("div",null,u.a.createElement("button",{disabled:null===n||"ready"!==i,onClick:function(){l&&(n.send(l),c(""))}},"Send")))};n.default=function(){return u.a.createElement(c,null)}}}]);
//# sourceMappingURL=5.16179735.chunk.js.map